; =================================================================================================
; =================================================================================================
;  Data.inc - BrutaleControlCore data and computation
; =================================================================================================

[MeasureInit]
Measure=Calc
Formula=1
IfCondition=1
IfTrueAction=[!SetVariable SpinFast 0][!SetVariable SpinSlow 0]
DynamicVariables=1

[MeasureDataBridge]
Measure=Script
ScriptFile=#@#Scripts\DataBridge.lua
UpdateDivider=1
DynamicVariables=1

[MeasureTimeS]
Measure=Time
Format=%s
UpdateDivider=#UpdateRateFast#

[MeasureConst100]
Measure=Calc
Formula=100

[MeasureSafe_NetMaxMbps]
Measure=Calc
Formula=(#NetMaxMbps# > 0 ? #NetMaxMbps# : 1)
DynamicVariables=1

[MeasureSafe_DiskIOMaxMB]
Measure=Calc
Formula=(#DiskIOMaxMB# > 0 ? #DiskIOMaxMB# : 1)
DynamicVariables=1

[MeasureSafe_PingWarnMs]
Measure=Calc
Formula=(#PingWarnMs# > 0 ? #PingWarnMs# : 1)
DynamicVariables=1

[MeasureSpinFast]
Measure=Calc
Formula=Mod([MeasureSpinFast]+#SpinFastStep#,6.28318)
DynamicVariables=1

[MeasureSpinSlow]
Measure=Calc
Formula=Mod([MeasureSpinSlow]+#SpinSlowStep#,6.28318)
DynamicVariables=1

[MeasurePulseSin]
Measure=Calc
Formula=(Sin(([MeasureTimeS]*#PulseRate#)+[MeasureSpinSlow])*0.5+0.5)
DynamicVariables=1

[MeasureSpinFastVar]
Measure=Calc
Formula=[MeasureSpinFast]
IfCondition=1
IfTrueAction=[!SetVariable SpinFast [MeasureSpinFastVar]][!SetVariable SpinSlow [MeasureSpinSlow]]
DynamicVariables=1

; -------------------------------------------------------------------------------------------------
; CPU total and per-core
; -------------------------------------------------------------------------------------------------

[MeasureCPU_TotalRaw]
Measure=CPU
UpdateDivider=#UpdateRateFast#

[MeasureCPU_TotalC]
Measure=Calc
Formula=Clamp(([MeasureCPU_TotalRaw] < 0 ? 0 : [MeasureCPU_TotalRaw]),0,100)
DynamicVariables=1

[MeasureCPU_TotalS]
Measure=Calc
Formula=Clamp(([MeasureCPU_TotalS]+([MeasureCPU_TotalC]-[MeasureCPU_TotalS])*(#EaseFast#)),0,100)
DynamicVariables=1

[MeasureCPU_Core1Raw]
Measure=CPU
Processor=0
UpdateDivider=#UpdateRateFast#

[MeasureCPU_Core1C]
Measure=Calc
Formula=Clamp(([MeasureCPU_Core1Raw] < 0 ? 0 : [MeasureCPU_Core1Raw]),0,100)
DynamicVariables=1

[MeasureCPU_Core1S]
Measure=Calc
Formula=Clamp(([MeasureCPU_Core1S]+([MeasureCPU_Core1C]-[MeasureCPU_Core1S])*(#EaseFast#)),0,100)
DynamicVariables=1

[MeasureCPU_Core2Raw]
Measure=CPU
Processor=1
UpdateDivider=#UpdateRateFast#

[MeasureCPU_Core2C]
Measure=Calc
Formula=Clamp(([MeasureCPU_Core2Raw] < 0 ? 0 : [MeasureCPU_Core2Raw]),0,100)
DynamicVariables=1

[MeasureCPU_Core2S]
Measure=Calc
Formula=Clamp(([MeasureCPU_Core2S]+([MeasureCPU_Core2C]-[MeasureCPU_Core2S])*(#EaseFast#)),0,100)
DynamicVariables=1

[MeasureCPU_Core3Raw]
Measure=CPU
Processor=2
UpdateDivider=#UpdateRateFast#

[MeasureCPU_Core3C]
Measure=Calc
Formula=Clamp(([MeasureCPU_Core3Raw] < 0 ? 0 : [MeasureCPU_Core3Raw]),0,100)
DynamicVariables=1

[MeasureCPU_Core3S]
Measure=Calc
Formula=Clamp(([MeasureCPU_Core3S]+([MeasureCPU_Core3C]-[MeasureCPU_Core3S])*(#EaseFast#)),0,100)
DynamicVariables=1

[MeasureCPU_Core4Raw]
Measure=CPU
Processor=3
UpdateDivider=#UpdateRateFast#

[MeasureCPU_Core4C]
Measure=Calc
Formula=Clamp(([MeasureCPU_Core4Raw] < 0 ? 0 : [MeasureCPU_Core4Raw]),0,100)
DynamicVariables=1

[MeasureCPU_Core4S]
Measure=Calc
Formula=Clamp(([MeasureCPU_Core4S]+([MeasureCPU_Core4C]-[MeasureCPU_Core4S])*(#EaseFast#)),0,100)
DynamicVariables=1

[MeasureCPU_Core5Raw]
Measure=CPU
Processor=4
UpdateDivider=#UpdateRateFast#

[MeasureCPU_Core5C]
Measure=Calc
Formula=Clamp(([MeasureCPU_Core5Raw] < 0 ? 0 : [MeasureCPU_Core5Raw]),0,100)
DynamicVariables=1

[MeasureCPU_Core5S]
Measure=Calc
Formula=Clamp(([MeasureCPU_Core5S]+([MeasureCPU_Core5C]-[MeasureCPU_Core5S])*(#EaseFast#)),0,100)
DynamicVariables=1

[MeasureCPU_Core6Raw]
Measure=CPU
Processor=5
UpdateDivider=#UpdateRateFast#

[MeasureCPU_Core6C]
Measure=Calc
Formula=Clamp(([MeasureCPU_Core6Raw] < 0 ? 0 : [MeasureCPU_Core6Raw]),0,100)
DynamicVariables=1

[MeasureCPU_Core6S]
Measure=Calc
Formula=Clamp(([MeasureCPU_Core6S]+([MeasureCPU_Core6C]-[MeasureCPU_Core6S])*(#EaseFast#)),0,100)
DynamicVariables=1

; -------------------------------------------------------------------------------------------------
; RAM, commit and pagefile
; -------------------------------------------------------------------------------------------------

[MeasureRAM_UsedB]
Measure=PhysicalMemory
UpdateDivider=#UpdateRateFast#

[MeasureRAM_TotalB]
Measure=PhysicalMemory
Total=1
UpdateDivider=#UpdateRateSlow#

[MeasureRAM_UsedPctRaw]
Measure=Calc
Formula=([MeasureRAM_TotalB] > 0 ? ([MeasureRAM_UsedB]/[MeasureRAM_TotalB])*100 : 0)
DynamicVariables=1

[MeasureRAM_UsedPct]
Measure=Calc
Formula=Clamp(([MeasureRAM_UsedPctRaw] < 0 ? 0 : [MeasureRAM_UsedPctRaw]),0,100)
DynamicVariables=1

[MeasureRAM_UsedPctS]
Measure=Calc
Formula=Clamp(([MeasureRAM_UsedPctS]+([MeasureRAM_UsedPct]-[MeasureRAM_UsedPctS])*(#EaseSlow#)),0,100)
DynamicVariables=1

[MeasureRAM_UsedGB]
Measure=Calc
Formula=([MeasureRAM_UsedB]/1073741824)
DynamicVariables=1

[MeasureRAM_TotalGB]
Measure=Calc
Formula=([MeasureRAM_TotalB]/1073741824)
DynamicVariables=1

[MeasureRAM_FreeGB]
Measure=Calc
Formula=(([MeasureRAM_TotalB] > [MeasureRAM_UsedB] ? ([MeasureRAM_TotalB]-[MeasureRAM_UsedB]) : 0)/1073741824)
DynamicVariables=1

[MeasureCommit_PctPerfRaw]
Measure=Plugin
Plugin=PerfMon
PerfMonObject=Memory
PerfMonCounter=% Committed Bytes In Use
UpdateDivider=#UpdateRateSlow#

[MeasureCommit_BytesRaw]
Measure=Plugin
Plugin=PerfMon
PerfMonObject=Memory
PerfMonCounter=Committed Bytes
UpdateDivider=#UpdateRateSlow#

[MeasureCommit_LimitRaw]
Measure=Plugin
Plugin=PerfMon
PerfMonObject=Memory
PerfMonCounter=Commit Limit
UpdateDivider=#UpdateRateSlow#

[MeasureCommit_Bytes]
Measure=Calc
Formula=([MeasureCommit_BytesRaw] < 0 ? 0 : [MeasureCommit_BytesRaw])
DynamicVariables=1

[MeasureCommit_Limit]
Measure=Calc
Formula=([MeasureCommit_LimitRaw] < 0 ? 0 : [MeasureCommit_LimitRaw])
DynamicVariables=1

[MeasureCommit_HasLimit]
Measure=Calc
Formula=([MeasureCommit_Limit] > 0 ? 1 : 0)
DynamicVariables=1

[MeasureCommit_PctRaw]
Measure=Calc
Formula=([MeasureCommit_HasLimit] = 1 ? ([MeasureCommit_Bytes]/[MeasureCommit_Limit])*100 : [MeasureCommit_PctPerfRaw])
DynamicVariables=1

[MeasureCommit_Pct]
Measure=Calc
Formula=Clamp(([MeasureCommit_PctRaw] < 0 ? 0 : [MeasureCommit_PctRaw]),0,100)
DynamicVariables=1

[MeasureCommit_PctS]
Measure=Calc
Formula=Clamp(([MeasureCommit_PctS]+([MeasureCommit_Pct]-[MeasureCommit_PctS])*(#EaseSlow#)),0,100)
DynamicVariables=1

[MeasureCommit_UsedGB]
Measure=Calc
Formula=([MeasureCommit_Bytes]/1073741824)
DynamicVariables=1

[MeasureCommit_LimitGB]
Measure=Calc
Formula=([MeasureCommit_Limit]/1073741824)
DynamicVariables=1

[MeasurePage_PctRaw]
Measure=SwapMemory
UpdateDivider=#UpdateRateSlow#

[MeasurePage_Pct]
Measure=Calc
Formula=Clamp(([MeasurePage_PctRaw] < 0 ? 0 : [MeasurePage_PctRaw]),0,100)
DynamicVariables=1

[MeasurePage_PctS]
Measure=Calc
Formula=Clamp(([MeasurePage_PctS]+([MeasurePage_Pct]-[MeasurePage_PctS])*(#EaseSlow#)),0,100)
DynamicVariables=1

[MeasurePage_TotalB_Raw]
Measure=SwapMemory
Total=1
UpdateDivider=#UpdateRateSlow#

[MeasurePage_TotalB]
Measure=Calc
Formula=([MeasurePage_TotalB_Raw] < 0 ? 0 : [MeasurePage_TotalB_Raw])
DynamicVariables=1

[MeasurePage_UsedB]
Measure=Calc
Formula=([MeasurePage_TotalB]*[MeasurePage_Pct]/100)
DynamicVariables=1

[MeasurePage_TotalGB]
Measure=Calc
Formula=([MeasurePage_TotalB]/1073741824)
DynamicVariables=1

[MeasurePage_UsedGB]
Measure=Calc
Formula=([MeasurePage_UsedB]/1073741824)
DynamicVariables=1

[MeasurePage_HasFile]
Measure=Calc
Formula=([MeasurePage_TotalB] > 0 ? 1 : 0)
DynamicVariables=1

; -------------------------------------------------------------------------------------------------
; Disk usage per drive and IO rates
; -------------------------------------------------------------------------------------------------

[MeasureDisk1_FreePctRaw]
Measure=FreeDiskSpace
Drive=#DiskDrive1#
InvertMeasure=0
UpdateDivider=#UpdateRateSlow#
DynamicVariables=1

[MeasureDisk1_TotalGBRaw]
Measure=FreeDiskSpace
Drive=#DiskDrive1#
Total=1
UpdateDivider=#UpdateRateSlow#
DynamicVariables=1

[MeasureDisk1_Valid]
Measure=Calc
Formula=([MeasureDisk1_FreePctRaw] >= 0 ? ([MeasureDisk1_TotalGBRaw] > 0 ? 1 : 0) : 0)
DynamicVariables=1

[MeasureDisk1_FreePct]
Measure=Calc
Formula=([MeasureDisk1_Valid] = 1 ? Clamp([MeasureDisk1_FreePctRaw],0,100) : 0)
DynamicVariables=1

[MeasureDisk1_UsedPct]
Measure=Calc
Formula=([MeasureDisk1_Valid] = 1 ? Clamp(100-[MeasureDisk1_FreePct],0,100) : 0)
DynamicVariables=1

[MeasureDisk1_UsedPctS]
Measure=Calc
Formula=Clamp(([MeasureDisk1_UsedPctS]+([MeasureDisk1_UsedPct]-[MeasureDisk1_UsedPctS])*(#EaseSlow#)),0,100)
DynamicVariables=1

[MeasureDisk1_TotalGB]
Measure=Calc
Formula=([MeasureDisk1_Valid] = 1 ? ([MeasureDisk1_TotalGBRaw] < 0 ? 0 : [MeasureDisk1_TotalGBRaw]) : 0)
DynamicVariables=1

[MeasureDisk1_FreeGB]
Measure=Calc
Formula=Clamp(([MeasureDisk1_TotalGB]*[MeasureDisk1_FreePct]/100),0,[MeasureDisk1_TotalGB])
DynamicVariables=1

[MeasureDisk1_UsedGB]
Measure=Calc
Formula=Clamp(([MeasureDisk1_TotalGB]-[MeasureDisk1_FreeGB]),0,[MeasureDisk1_TotalGB])
DynamicVariables=1

[MeasureDisk2_FreePctRaw]
Measure=FreeDiskSpace
Drive=#DiskDrive2#
InvertMeasure=0
UpdateDivider=#UpdateRateSlow#
DynamicVariables=1

[MeasureDisk2_TotalGBRaw]
Measure=FreeDiskSpace
Drive=#DiskDrive2#
Total=1
UpdateDivider=#UpdateRateSlow#
DynamicVariables=1

[MeasureDisk2_Valid]
Measure=Calc
Formula=([MeasureDisk2_FreePctRaw] >= 0 ? ([MeasureDisk2_TotalGBRaw] > 0 ? 1 : 0) : 0)
DynamicVariables=1

[MeasureDisk2_FreePct]
Measure=Calc
Formula=([MeasureDisk2_Valid] = 1 ? Clamp([MeasureDisk2_FreePctRaw],0,100) : 0)
DynamicVariables=1

[MeasureDisk2_UsedPct]
Measure=Calc
Formula=([MeasureDisk2_Valid] = 1 ? Clamp(100-[MeasureDisk2_FreePct],0,100) : 0)
DynamicVariables=1

[MeasureDisk2_UsedPctS]
Measure=Calc
Formula=Clamp(([MeasureDisk2_UsedPctS]+([MeasureDisk2_UsedPct]-[MeasureDisk2_UsedPctS])*(#EaseSlow#)),0,100)
DynamicVariables=1

[MeasureDisk2_TotalGB]
Measure=Calc
Formula=([MeasureDisk2_Valid] = 1 ? ([MeasureDisk2_TotalGBRaw] < 0 ? 0 : [MeasureDisk2_TotalGBRaw]) : 0)
DynamicVariables=1

[MeasureDisk2_FreeGB]
Measure=Calc
Formula=Clamp(([MeasureDisk2_TotalGB]*[MeasureDisk2_FreePct]/100),0,[MeasureDisk2_TotalGB])
DynamicVariables=1

[MeasureDisk2_UsedGB]
Measure=Calc
Formula=Clamp(([MeasureDisk2_TotalGB]-[MeasureDisk2_FreeGB]),0,[MeasureDisk2_TotalGB])
DynamicVariables=1

[MeasureDisk_ReadBpsRaw]
Measure=Plugin
Plugin=PerfMon
PerfMonObject=PhysicalDisk
PerfMonCounter=Disk Read Bytes/sec
PerfMonInstance=_Total
UpdateDivider=#UpdateRateSlow#

[MeasureDisk_WriteBpsRaw]
Measure=Plugin
Plugin=PerfMon
PerfMonObject=PhysicalDisk
PerfMonCounter=Disk Write Bytes/sec
PerfMonInstance=_Total
UpdateDivider=#UpdateRateSlow#

[MeasureDisk_ReadBps]
Measure=Calc
Formula=([MeasureDisk_ReadBpsRaw] < 0 ? 0 : [MeasureDisk_ReadBpsRaw])
DynamicVariables=1

[MeasureDisk_WriteBps]
Measure=Calc
Formula=([MeasureDisk_WriteBpsRaw] < 0 ? 0 : [MeasureDisk_WriteBpsRaw])
DynamicVariables=1

[MeasureDisk_ReadBpsS]
Measure=Calc
Formula=([MeasureDisk_ReadBpsS]+([MeasureDisk_ReadBps]-[MeasureDisk_ReadBpsS])*(#EaseFast#))
DynamicVariables=1

[MeasureDisk_WriteBpsS]
Measure=Calc
Formula=([MeasureDisk_WriteBpsS]+([MeasureDisk_WriteBps]-[MeasureDisk_WriteBpsS])*(#EaseFast#))
DynamicVariables=1

[MeasureDisk_ReadMBps]
Measure=Calc
Formula=([MeasureDisk_ReadBpsS]/1048576)
DynamicVariables=1

[MeasureDisk_WriteMBps]
Measure=Calc
Formula=([MeasureDisk_WriteBpsS]/1048576)
DynamicVariables=1

[MeasureDisk_ReadPct]
Measure=Calc
Formula=Clamp(([MeasureDisk_ReadMBps]/[MeasureSafe_DiskIOMaxMB])*100,0,100)
DynamicVariables=1

[MeasureDisk_WritePct]
Measure=Calc
Formula=Clamp(([MeasureDisk_WriteMBps]/[MeasureSafe_DiskIOMaxMB])*100,0,100)
DynamicVariables=1

[MeasureDisk_ReadPctS]
Measure=Calc
Formula=Clamp(([MeasureDisk_ReadPctS]+([MeasureDisk_ReadPct]-[MeasureDisk_ReadPctS])*(#EaseSlow#)),0,100)
DynamicVariables=1

[MeasureDisk_WritePctS]
Measure=Calc
Formula=Clamp(([MeasureDisk_WritePctS]+([MeasureDisk_WritePct]-[MeasureDisk_WritePctS])*(#EaseSlow#)),0,100)
DynamicVariables=1

; -------------------------------------------------------------------------------------------------
; Network and ping
; -------------------------------------------------------------------------------------------------

[MeasureNet_InBpsRaw]
Measure=NetIn
Interface=#NetAdapter#
UpdateDivider=#UpdateRateFast#
DynamicVariables=1

[MeasureNet_OutBpsRaw]
Measure=NetOut
Interface=#NetAdapter#
UpdateDivider=#UpdateRateFast#
DynamicVariables=1

[MeasureNet_InTotalB]
Measure=NetIn
Interface=#NetAdapter#
Cumulative=1
UpdateDivider=#UpdateRateSlow#
DynamicVariables=1

[MeasureNet_OutTotalB]
Measure=NetOut
Interface=#NetAdapter#
Cumulative=1
UpdateDivider=#UpdateRateSlow#
DynamicVariables=1

[MeasureNet_InBps]
Measure=Calc
Formula=([MeasureNet_InBpsRaw] < 0 ? 0 : [MeasureNet_InBpsRaw])
DynamicVariables=1

[MeasureNet_OutBps]
Measure=Calc
Formula=([MeasureNet_OutBpsRaw] < 0 ? 0 : [MeasureNet_OutBpsRaw])
DynamicVariables=1

[MeasureNet_InBpsS]
Measure=Calc
Formula=([MeasureNet_InBpsS]+([MeasureNet_InBps]-[MeasureNet_InBpsS])*(#EaseFast#))
DynamicVariables=1

[MeasureNet_OutBpsS]
Measure=Calc
Formula=([MeasureNet_OutBpsS]+([MeasureNet_OutBps]-[MeasureNet_OutBpsS])*(#EaseFast#))
DynamicVariables=1

[MeasureNet_InKbps]
Measure=Calc
Formula=([MeasureNet_InBpsS]*8/1000)
DynamicVariables=1

[MeasureNet_OutKbps]
Measure=Calc
Formula=([MeasureNet_OutBpsS]*8/1000)
DynamicVariables=1

[MeasureNet_InMbps]
Measure=Calc
Formula=([MeasureNet_InBpsS]*8/1000000)
DynamicVariables=1

[MeasureNet_OutMbps]
Measure=Calc
Formula=([MeasureNet_OutBpsS]*8/1000000)
DynamicVariables=1

[MeasureNet_InPct]
Measure=Calc
Formula=Clamp(([MeasureNet_InMbps]/[MeasureSafe_NetMaxMbps])*100,0,100)
DynamicVariables=1

[MeasureNet_OutPct]
Measure=Calc
Formula=Clamp(([MeasureNet_OutMbps]/[MeasureSafe_NetMaxMbps])*100,0,100)
DynamicVariables=1

[MeasureNet_InPctS]
Measure=Calc
Formula=Clamp(([MeasureNet_InPctS]+([MeasureNet_InPct]-[MeasureNet_InPctS])*(#EaseSlow#)),0,100)
DynamicVariables=1

[MeasureNet_OutPctS]
Measure=Calc
Formula=Clamp(([MeasureNet_OutPctS]+([MeasureNet_OutPct]-[MeasureNet_OutPctS])*(#EaseSlow#)),0,100)
DynamicVariables=1

[MeasurePing_Raw]
Measure=Plugin
Plugin=PingPlugin
DestAddress=#PingHost#
UpdateDivider=#UpdateRateSlow#
Timeout=1500

[MeasurePing_Valid]
Measure=Calc
Formula=([MeasurePing_Raw] >= 0 ? 1 : 0)
DynamicVariables=1

[MeasurePing_MS]
Measure=Calc
Formula=([MeasurePing_Valid] = 1 ? Clamp([MeasurePing_Raw],0,60000) : [MeasurePing_MS])
DynamicVariables=1

[MeasurePing_Pct]
Measure=Calc
Formula=Clamp(([MeasurePing_MS]/[MeasureSafe_PingWarnMs])*100,0,100)
DynamicVariables=1

[MeasurePing_PctS]
Measure=Calc
Formula=Clamp(([MeasurePing_PctS]+([MeasurePing_Pct]-[MeasurePing_PctS])*(#EaseSlow#)),0,100)
DynamicVariables=1

; -------------------------------------------------------------------------------------------------
; System labels, sparklines and process bars
; -------------------------------------------------------------------------------------------------

[MeasureUptime]
Measure=Uptime
Format="%4!i!d %3!i!h %2!i!m"
UpdateDivider=#UpdateRateSlow#

[MeasureProcBar1]
Measure=Calc
Formula=Clamp(#ProcBar1#,0,100)
DynamicVariables=1

[MeasureProcBar2]
Measure=Calc
Formula=Clamp(#ProcBar2#,0,100)
DynamicVariables=1

[MeasureProcBar3]
Measure=Calc
Formula=Clamp(#ProcBar3#,0,100)
DynamicVariables=1

[MeasureProcBar4]
Measure=Calc
Formula=Clamp(#ProcBar4#,0,100)
DynamicVariables=1

[MeasureProcBar5]
Measure=Calc
Formula=Clamp(#ProcBar5#,0,100)
DynamicVariables=1

[MeasureProcBar6]
Measure=Calc
Formula=Clamp(#ProcBar6#,0,100)
DynamicVariables=1

[MeasureProcBar7]
Measure=Calc
Formula=Clamp(#ProcBar7#,0,100)
DynamicVariables=1

[MeasureProcBar8]
Measure=Calc
Formula=Clamp(#ProcBar8#,0,100)
DynamicVariables=1

; =================================================================================================
